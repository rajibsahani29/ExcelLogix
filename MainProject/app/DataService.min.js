(function(){angular.module("iAspireApp").factory("DataService",["$http","ProjectConstants","$q","$timeout",function(b,f,k,l){function g(){return"https://iAspire.azurewebsites.net"}function c(){var a=g();return a+(-1<a.indexOf("azurewebsites")?"/WebAPI/api/":"/iAspireWebAPI/api/")}this.validateUserLogin=function(a){var d=c()+"Users/Validate";return b({method:"POST",url:d,headers:{"X-iA-AccessID":void 0},data:a})};this.reValidateUserLogin=function(a){var d=c()+"Users/Validate/Again";return b.post(d,
a)};this.validateAccessID=function(a){a=c()+"Users/Validate/"+a;return b({method:"GET",url:a,headers:{"X-iA-AccessID":void 0}})};this.createAccount=function(a){var d=c()+"Users/CreateNew";return b({method:"POST",url:d,headers:{"X-iA-AccessID":void 0},data:a})};this.userLogout=function(){var a=c()+"Users/Logout";return b.post(a)};this.resetPassword=function(a){var d=c()+"Users/Validate/Reset";return b({method:"POST",url:d,headers:{"X-iA-AccessID":void 0},data:a})};this.userTeacherCheckIfUserIsTeacher=
function(){var a=c()+"UserTeachers/Current";return b.get(a)};this.getSurveys=function(){var a=c()+"Surveys/CurrentUser";return b.get(a)};this.getTESurveyListForUser=function(){var a=c()+"Surveys/CurrentUser/TE";return b.get(a)};this.getSESurveyListForUser=function(){var a=c()+"Surveys/CurrentUser/SE";return b.get(a)};this.getSurvey=function(a){a=c()+"Surveys/Current/"+a;return b.get(a)};this.getFullSurveyDetails=function(a){a=c()+"Surveys/FullDetails/"+a;return b.get(a)};this.getSurveyVariables=function(a){a=
c()+"Surveys/Current/"+a+"/Variables";return b.get(a)};this.getUpdatedSurveyVariables=function(a){var d=c()+"Surveys/Current/Variables";return b.post(d,a)};this.getAdminPanelSurveyURL=function(a,b,c){var h=g();return h+(-1<h.indexOf("azurewebsites")?"/WAP/iAspire/iAspireSurveyMobile.aspx":"/iAspireSurveyAdmin/iAspire/iAspireSurveyMobile.aspx")+"?"+f.QWRYSTR.SurveyID+"="+a+"&"+f.QWRYSTR.iAspireUserID+"="+b+"&"+f.QWRYSTR.iAspireSessionID+"="+c};this.getViewVoteURL=function(a){var b=g();return b+(-1<
b.indexOf("azurewebsites")?"/WAP/iAspire/surveymobilereport.aspx":"/iAspireSurveyAdmin/iAspire/surveymobilereport.aspx")+"?"+f.QWRYSTR.MappedParameters+"="+a};this.getViewVoteGuid=function(a){a=c()+"Surveys/Current/Summary/"+a;return b.get(a)};this.getVoterList=function(){var a={method:"GET",url:c()+"Users/Votes/WithTeacherAddins",timeout:12E4};return b(a)};this.getVoterListAsync=function(){var a={method:"GET",url:c()+"Users/Votes/WithTeacherAddins/Async",timeout:12E4};return b(a)};this.GetSEAddinsVotesListForUser=
function(){var a=c()+"Users/Votes/SE/Addins/BySchool";return b.get(a)};this.getUserRolesWithRights=function(){var a=c()+"Roles/Current/WithRights";return b.get(a)};this.getTeachersBySurvey=function(a){a=c()+"Teachers/Current/"+a;return b.get(a)};this.setVoterToOpen=function(a){a=c()+"Voter/Current/SetOpen/"+a;return b.post(a)};this.setVoterToClosed=function(a){a=c()+"Voter/Current/SetClosed/"+a;return b.post(a)};this.getVotesForSurveyBetweenRange=function(a,d,e){d=encodeURIComponent(moment(d).format("LLL"));
e=encodeURIComponent(moment(e).format("LLL"));a=c()+"Voter/Current/FullPivot?surveyID="+a+"&startDate="+d+"&endDate="+e;return b.get(a)};this.getMerchantsForUser=function(){var a=c()+"Merchant/Current";return b.get(a)};this.support={};this.support.createApptivoCase=function(a,d){var e=c()+"Apptivo/Cases?caseSummary="+encodeURIComponent(a)+"&caseDescription="+encodeURIComponent(d);return b.post(e)};return this}])})();
