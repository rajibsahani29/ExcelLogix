(function(){angular.module("iAspireApp").controller("CreateAccountController",["$scope","$location","SMAAlertFactory","ProjectConstants","DataService",function(c,g,b,e,f){c.AppC.ShowHeader=!1;c.AppC.ShowFooter=!1;c.AppC.ActivePageName="";var a=this;a.UserName="";a.Password="";a.Name="";a.SchoolCorporation="";a.County="";a.State="AL";a.CheckPassword=function(b){b=/(?=^.{6,}).*$/;var d=/(?=.*[\s]).*$/;a.Password?(!0===b.test(a.Password)?a.PasswordValidation.ContainsLength=!0:a.PasswordValidation.ContainsLength=
!1,!0===d.test(a.Password)?a.PasswordValidation.ContainsWhitespace=!0:a.PasswordValidation.ContainsWhitespace=!1,!0===a.PasswordValidation.ContainsLength&&!1===a.PasswordValidation.ContainsWhitespace?setTimeout(function(){!0===a.PasswordValidation.ContainsLength&&!1===a.PasswordValidation.ContainsWhitespace&&(a.PasswordValidation.ShowMessages=!1,c.$apply())},2E3):a.PasswordValidation.ShowMessages=!0):a.PasswordValidation.ShowMessages=!1};a.PasswordValidation=function(){};a.PasswordValidation.ShowMessages=
!1;a.PasswordValidation.ContainsUppercase=!1;a.PasswordValidation.ContainsLowercase=!1;a.PasswordValidation.ContainsNumber=!1;a.PasswordValidation.ContainsSymbol=!1;a.PasswordValidation.ContainsLength=!1;a.PasswordValidation.ContainsWhitespace=!1;a.CreateAccount=function(){!0===e.App.IsDownForMaintenance?b.CreateInfoAlert("Oops!","iAspire is currently down for maintenance.\nPlease try again later."):a.UserName&&""!==a.UserName?a.Password&&""!==a.Password?a.Name&&""!==a.Name?a.SchoolCorporation&&""!==
a.SchoolCorporation?a.State&&""!==a.State?(a.userClickedButton=!0,f.createAccount({UserName:a.UserName,Password:a.Password,Name:a.Name,SchoolCorporation:a.SchoolCorporation,State:a.State}).success(function(b,d,e,f){c.AppC.userLogin=a.UserName;c.AppC.userPassword=a.Password;window.location.hash="#/login"}).error(function(c,d,e,f){console.error(c);409===d?b.CreateInfoAlert("Oops!","Email is already is use."):b.CreateInfoAlert("Oops!","Something has gone wrong.\nPlease try again later.");a.userClickedButton=
!1})):b.CreateInfoAlert("Error","Please Enter a state"):b.CreateInfoAlert("Error","Please enter a school corporation"):b.CreateInfoAlert("Error","Please enter a name"):b.CreateInfoAlert("Error","Invalid Password.\nMinimum requirements:\nlength 8 - 12 characters\n 1 small character\n1 capital character\n1 number"):b.CreateInfoAlert("Error","Invalid email")};a.userClickedButton=null;return a}])})();
