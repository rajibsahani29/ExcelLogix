(function(){angular.module("iAspireApp").controller("SettingsController",["DataService","$scope","SMAAlertFactory",function(k,c,h){var g=localStorage.getItem("ReportingSettings_DateRangeValue"),l=localStorage.getItem("ReportingSettings_DateRangeType"),m=localStorage.getItem("ReportingSettings_CollapseComments"),n=localStorage.getItem("ReportingSettings_DataFormat"),p=localStorage.getItem("ReportingSettings_DataType");c.AppC.ShowHeader=!0;c.AppC.ShowFooter=!0;c.AppC.ActivePageName="Settings";var b=
this;g||l?(b.ReportingSettings_DateRangeValue=JSON.parse(g),b.ReportingSettings_DateRangeType=l):(b.ReportingSettings_DateRangeValue=9,b.ReportingSettings_DateRangeType="Week");b.ReportingSettings_CollapseComments=m?JSON.parse(m):"false";b.ReportingSettings_DataFormat=n?n:"Totals";b.ReportingSettings_DataType=p?p:"Frequency";b.ReportingSettings_DateRangeOptions=[];b.logout=function(){h.CreateConfirmAlert("Are you sure you want to log out?",null,null,null,function(a){!0===a&&k.userLogout().success(function(a,
b,f,e){c.AppC.ActiveUser.UserID=null}).error(function(a,b,f,e){c.AppC.ActiveUser.UserID=null})})};b.ReportingSettings_DateRangeOptions.push({Name:"Days",ID:"Day"});b.ReportingSettings_DateRangeOptions.push({Name:"Weeks",ID:"Week"});b.ReportingSettings_DateRangeOptions.push({Name:"Months",ID:"Month"});b.ReportingSettings_DateRangeOptions.push({Name:"Quarters",ID:"Quarter"});b.ReportingSettings_DateRangeOptions.push({Name:"Years",ID:"Year"});c.$watch("setC.ReportingSettings_DateRangeValue",function(a,
d){a&&a!==d&&(localStorage.setItem("ReportingSettings_DateRangeValue",JSON.stringify(b.ReportingSettings_DateRangeValue)),localStorage.setItem("ReportingSettings_DateRangeType",b.ReportingSettings_DateRangeType))});c.$watch("setC.ReportingSettings_DateRangeType",function(a,d){a&&a!==d&&(localStorage.setItem("ReportingSettings_DateRangeValue",JSON.stringify(b.ReportingSettings_DateRangeValue)),localStorage.setItem("ReportingSettings_DateRangeType",b.ReportingSettings_DateRangeType))});c.$watch("setC.ReportingSettings_CollapseComments",
function(a,d){a&&a!==d&&localStorage.setItem("ReportingSettings_CollapseComments",JSON.stringify(b.ReportingSettings_CollapseComments))});c.$watch("setC.ReportingSettings_DataFormat",function(a,d){a&&a!==d&&localStorage.setItem("ReportingSettings_DataFormat",b.ReportingSettings_DataFormat)});c.$watch("setC.ReportingSettings_DataType",function(a,d){a&&a!==d&&localStorage.setItem("ReportingSettings_DataType",b.ReportingSettings_DataType)});b.MakeSupportPopup=function(){var a=document.createElement("div"),
b=document.createElement("label");a.appendChild(b);var c=document.createElement("input");c.type="text";c.placeholder="Summary";a.appendChild(c);a.appendChild(document.createElement("br"));a.appendChild(document.createElement("br"));var f=document.createElement("textarea");f.placeholder="Description";f.style.minWidth="250px";f.style.minHeight="100px";a.appendChild(f);a.appendChild(document.createElement("br"));a.appendChild(document.createElement("br"));var e=document.createElement("button");e.type=
"button";e.classList.add("blueButton");e.innerHTML="Submit";e.style.marginBottom="10px";a.appendChild(e);var g=h.CreateCustomAlert(a,"What can we help you with today?");e.onclick=function(){e.disabled=!0;c.style.display="none";f.style.display="none";b.innerHTML="Sending data...";k.support.createApptivoCase(c.value,f.value).then(function(a){console.log(a);h.CreateInfoAlert("Success!","Your feedback has been submitted.");g.resolve()},function(a){console.error(a);h.CreateInfoAlert("Ooops!","Something went wrong.");
g.resolve()})}}}])})();
