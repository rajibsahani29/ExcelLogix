(function(){angular.module("iAspireApp").controller("SelectionController",["DataService","$scope","SMAAlertFactory",function(k,g,h){g.AppC.ShowHeader=!1;g.AppC.ShowFooter=!1;g.AppC.ActivePageName="Select";var e=this;e.getSurveyList=function(d,n,a){function c(a){var b=document.createElement("div");b.classList.add("SurveyRow");b.onclick=function(){h.RemoveAllAlerts();window.location.hash="#/survey/"+a.SurveyID+"/"+a.SurveyGuid};var c=document.createElement("label");c.textContent=a.Title;c.classList.add("SurveyText");
b.appendChild(c);return b}!0!==a&&(a=!1);if(1>e.surveys.length||!0===a)k.getSurveys().success(function(a,b,d,n){var g=document.createElement("div");g.classList.add("SurveyRowWrapper");e.surveys=[];a.forEach(function(a){e.surveys.push(a);g.appendChild(c(a))});h.CreateCustomAlert(g,"Surveys")}).error(function(a,b,c,e){});else{var b=document.createElement("div");b.classList.add("SurveyRowWrapper");e.surveys.forEach(function(a){b.appendChild(c(a))});h.CreateCustomAlert(b,"Surveys")}};e.getVotesList=function(){function e(a){var c=
document.createElement("div"),b=document.createElement("label");b.textContent=a[0].SurveyTitle;var f=document.createElement("div"),l;for(l in a)f.appendChild(d(a[l]));c.appendChild(b);c.appendChild(f);c.style.marginBottom="10px";return c}function d(a){var c=document.createElement("div"),b=document.createElement("label");b.style.display="inline-block";b.style.width="49%";b.style.textAlign="left";var f=document.createElement("label");f.style.display="inline-block";f.style.width="50%";f.style.textAlign=
"right";b.textContent=a.UniqueSurveyTitle;a=new Date(a.VoteDate);var e=12<a.getHours();f.textContent=a.toDateString()+" "+a.getHours()%12+":"+a.getMinutes()+(e?"PM":"AM");c.appendChild(b);c.appendChild(f);return c}k.getVoterList().success(function(a,c,b,f){console.log(a);c=document.createElement("div");b=a[0].SurveyID;f=[];for(var d in a)a[d].SurveyID!==b?(c.appendChild(e(f)),f=[],f.push(a[d]),b=a[d].SurveyID):f.push(a[d]);h.CreateCustomAlert(c,"Available Forms")}).error(function(a,c,b,d){})};e.surveys=
[];e.teachers=[];$(".xdsoft_").remove();var d=[],m=[38,38,40,40,37,39,37,39,66,65];document.getElementsByClassName("iAspireLogo");document.body.addEventListener("keydown",function(e){var g=document.getElementsByClassName("PositioningContainer")[0];if(g){var a=!0;10<d.length?d.shift():10<d.length&&(a=!1);d.push(e.keyCode);for(var c in d)for(var b in m)c===b&&d[c]!==m[b]&&(a=!1);!0===a&&10===d.length&&$(g).addClass("Spin")}},!1);return e}])})();
